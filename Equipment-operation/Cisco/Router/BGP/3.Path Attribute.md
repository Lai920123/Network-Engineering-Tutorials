# Path Attribute #

## 屬性分類 ##

Well-known versus optional 所有廠商公認與可選的</br>
Mandatory versus discretionary 強制執行與斟酌情況決定的</br>
Transitive versus nontrasitive 屬性攜帶範圍</br>
Partial 其餘部分可選的


## Cisco設備屬性選擇順序 ##

>此選路原則只考慮沒有迴圈和有有效下一跳的路由

越大越好

1. Prefer Highest Weight 優先使用最高的權重
2. Highest Local_Preference 優先使用最高的本地優先權
3. Prefer locally originated 優先使用

越小越好

4. Shortest AS_PATH 優先使用最短的AS_PATH的路徑
5. Lowest origin type 優先使用最低來源類型
6. Lowest MED 優先使用最小MED
7. Prefer eBGP over iBGP 優先使用eBGP而非iBGP
8. Lowest IGP metric to the BGP Next_Hop 
9. Oldest Path 
10. Lowest Router ID Source 
11. Lowest neighbor address 

## Weight(Proprietary) ##

Cisco專有屬性，此屬性不會傳遞給其他路由器，當路由是本地發出時Weight預設為32768，否則為0

```bash
router bgp 65000 
    neighbor 192.168.1.1 weight 10 
```

配置完後不會馬上生效，要使用soft reset讓配置生效

```bash
clear ip bgp 192.168.1.1 in #這裡的IP是鄰居的IP位置
```

## Local Preference ##

Well-known屬性，運行於同個AS區域中，預設為100 

```bash
route-map bgp-policy permit 10 
    set local-perference 150 
router bgp 65000 
    neighbor 192.168.1.1 route-map bgp-policy in 
```

## Originate ##



## AS Path length ##



## Origin code ##

IGP(i) 

EGP(e) 現在沒有EGP了

Incomplete(?)

可以使用route-map變更origin code的值

```bash
route-map bgp-policy permit 10 
    set origin igp 
router bgp 65000 
    neighbor 192.168.1.1 route-map igp in 
```

## MED ##



## eBGP path over iBGP path ##

優先選擇eBGP路徑而非iBGP，eBGP AD值為20，而iBGP為200，所以會優先選擇eBGP路徑

## Shortest IGP path to BGP next hop ##



## Oldest Path ##



## Router ID ##



## Neighbor IP address ##


## Reference ##

https://www.kwtrain.com/blog/bgp-pt2
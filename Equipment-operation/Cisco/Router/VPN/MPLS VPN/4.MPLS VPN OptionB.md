# MPLS VPN OptionB #

## 配置案例 ##

![](Image/MPLS%20VPN%20OptionB.png)

## 配置IP和底層IGP路由協議 ##

```bash
[R1]
enable 
conf t
hostname R1
int g0/0
    ip address 12.1.1.1 255.255.255.0
    no shutdown 
int lo0
    ip address 192.168.1.1 255.255.255.0
[R2]
enable 
conf t
hostname R2
int g0/0
    ip address 12.1.1.2 255.255.255.0
    no shutdown 
int g0/1
    ip address 23.1.1.2 255.255.255.0
    no shutdown 
int lo0
    ip address 2.2.2.2 255.255.255.255
router ospf 1
    router-id 2.2.2.2
    network 12.1.1.0 0.0.0.255 area 0
    network 23.1.1.0 0.0.0.255 area 0
    network 2.2.2.2 255.255.255.255 area 0
[R3]
enable 
conf t
hostname R3
int g0/1
    ip address 23.1.1.3 255.255.255.0
    no shutdown 
int g0/2
    ip address 34.1.1.3 255.255.255.0
    no shutdown 
int lo0
    ip address 3.3.3.3 255.255.255.255
router ospf 1
    router-id 3.3.3.3
    network 23.1.1.0 0.0.0.255 area 0
    network 34.1.1.0 0.0.0.255 area 0
    network 3.3.3.3 255.255.255.255 area 0
[R4]
enable 
conf t
hostname R4
int g0/2
    ip address 34.1.1.4 255.255.255.0
    no shutdown 
int g0/0
    ip address 45.1.1.4 255.255.255.0
    no shutdown
int lo0
    ip address 4.4.4.4 255.255.255.255
router ospf 1
    router-id 4.4.4.4
    network 34.1.1.0 0.0.0.255 area 0
    network 4.4.4.4 255.255.255.255 area 0
[R5]
enable 
conf t
hostname R5
int g0/0
    ip address 45.1.1.5 255.255.255.0
    no shutdown 
int g0/2
    ip address 56.1.1.5 255.255.255.0
    no shutdown
int lo0
    ip address 5.5.5.5 255.255.255.255
router ospf 1
    router-id 5.5.5.5
    network 56.1.1.0 0.0.0.255 area 0
    network 5.5.5.5 255.255.255.255 area 0
[R6]
enable 
conf t
hostname R6
int g0/2
    ip address 56.1.1.6 255.255.255.0
    no shutdown
int g0/1
    ip address 67.1.1.6 255.255.255.0
    no shutdown 
int lo0
    ip address 6.6.6.6 255.255.255.255
router ospf 1
    router-id 6.6.6.6
    network 56.1.1.0 0.0.0.255 area 0
    network 67.1.1.0 0.0.0.255 area 0
    network 6.6.6.6 255.255.255.255 area 0
[R7]
enable 
conf t
hostname R7
int g0/0
    ip address 87.1.1.7 255.255.255.0
    no shutdown 
int g0/1
    ip address 67.1.1.7 255.255.255.0
    no shutdown 
int lo0
    ip address 7.7.7.7 255.255.255.255
router ospf 1
    router-id 7.7.7.7
    network 67.1.1.0 0.0.0.255 area 0
    network 87.1.1.0 0.0.0.255 area 0
    network 7.7.7.7 255.255.255.255 area 0
[R8]
enable 
conf t
hostname R8
int g0/0
    ip address 87.1.1.8 255.255.255.0
    no shutdown 
int lo0
    ip address 192.168.2.1 255.255.255.0
```